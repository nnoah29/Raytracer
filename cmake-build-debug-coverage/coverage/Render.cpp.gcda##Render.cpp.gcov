        -:    0:Source:/home/nnoah/_WORKS/SCHooL_/RAYTRACER_/src/Render.cpp
        -:    0:Graph:/home/nnoah/_WORKS/SCHooL_/RAYTRACER_/cmake-build-debug-coverage/CMakeFiles/raytracer.dir/src/Render.cpp.gcno
        -:    0:Data:/home/nnoah/_WORKS/SCHooL_/RAYTRACER_/cmake-build-debug-coverage/CMakeFiles/raytracer.dir/src/Render.cpp.gcda
        -:    0:Runs:1
        -:    1:/*
        -:    2:**  _                                              _      ___    ___  
        -:    3:** | |                                            | |    |__ \  / _ \
        -:    4:** | |_Created _       _ __   _ __    ___    __ _ | |__     ) || (_) |
        -:    5:** | '_ \ | | | |     | '_ \ | '_ \  / _ \  / _` || '_ \   / /  \__, |
        -:    6:** | |_) || |_| |     | | | || | | || (_) || (_| || | | | / /_    / / 
        -:    7:** |_.__/  \__, |     |_| |_||_| |_| \___/  \__,_||_| |_||____|  /_/ 
        -:    8:**          __/ |     on 28/04/25.                                          
        -:    9:**         |___/ 
        -:   10:*/
        -:   11:
        -:   12:#include "Render.hpp"
        -:   13:#include <iostream>
        -:   14:#include <valarray>
        -:   15:#include <filesystem>
        -:   16:#include <SFML/Graphics.hpp>
        -:   17:#include <fstream>
        -:   18:#include <iostream>
        -:   19:#include <sstream>
        -:   20:#include <vector>
        -:   21:#include <string>
        -:   22:
        -:   23:#include "conf.hpp"
        -:   24:
        -:   25:
function _ZN6Render10loadPPM_P3ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEERSt6vectorIhSaIhEERjSC_ called 1 returned 100% blocks executed 55%
        1:   26:bool Render::loadPPM_P3(const std::string& filename, std::vector<sf::Uint8>& pixels, unsigned& width, unsigned& height)
        -:   27:{
        1:   28:    std::ifstream file(filename);
        1:   28-block 2
appel   0 a retourné 1
branchement  1 pris 1 (fallthrough)
branchement  2 pris 0 (throw)
        1:   29:    if (!file.is_open()) {
        1:   29-block 3
appel   0 a retourné 1
branchement  1 pris 0 (fallthrough)
branchement  2 pris 1
    #####:   30:        std::cerr << "Erreur lors de l'ouverture du fichier PPM.\n";
    %%%%%:   30-block 5
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    #####:   31:        return false;
    %%%%%:   31-block 6
        -:   32:    }
        -:   33:
        1:   34:    std::string line;
        1:   34-block 7
appel   0 a retourné 1
        1:   35:    std::istringstream iss(line);
appel   0 a retourné 1
branchement  1 pris 1 (fallthrough)
branchement  2 pris 0 (throw)
        1:   36:    iss >> width >> height;
        1:   36-block 9
appel   0 a retourné 1
branchement  1 pris 1 (fallthrough)
branchement  2 pris 0 (throw)
        1:   36-block 10
appel   3 a retourné 1
branchement  4 pris 1 (fallthrough)
branchement  5 pris 0 (throw)
        -:   37:
        1:   38:    int maxVal = 0;
        1:   39:    file >> maxVal;
        1:   39-block 11
appel   0 a retourné 1
branchement  1 pris 1 (fallthrough)
branchement  2 pris 0 (throw)
        -:   40:
        -:   41:    int r, g, b;
        1:   42:    pixels.reserve(width * height * 4);
        1:   42-block 12
appel   0 a retourné 1
branchement  1 pris 1 (fallthrough)
branchement  2 pris 0 (throw)
        1:   43:    while (file >> r >> g >> b) {
        1:   43-block 13
        1:   43-block 19
appel   0 a retourné 1
branchement  1 pris 1 (fallthrough)
branchement  2 pris 0 (throw)
        1:   43-block 20
appel   3 a retourné 1
branchement  4 pris 1 (fallthrough)
branchement  5 pris 0 (throw)
        1:   43-block 21
appel   6 a retourné 1
branchement  7 pris 1 (fallthrough)
branchement  8 pris 0 (throw)
        1:   43-block 22
appel   9 a retourné 1
branchement 10 pris 1 (fallthrough)
branchement 11 pris 0 (throw)
        1:   43-block 23
branchement 12 pris 0
branchement 13 pris 1 (fallthrough)
    #####:   44:        pixels.push_back(static_cast<sf::Uint8>(r));
    %%%%%:   44-block 14
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    $$$$$:   44-block 29
    #####:   45:        pixels.push_back(static_cast<sf::Uint8>(g));
    %%%%%:   45-block 15
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    $$$$$:   45-block 30
    #####:   46:        pixels.push_back(static_cast<sf::Uint8>(b));
    %%%%%:   46-block 16
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    $$$$$:   46-block 31
    #####:   47:        pixels.push_back(255);
    %%%%%:   47-block 17
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    %%%%%:   47-block 18
    $$$$$:   47-block 32
        -:   48:    }
        1:   49:    return true;
        1:   50:}
        1:   50-block 24
appel   0 a retourné 1
appel   1 a retourné 1
        1:   50-block 26
appel   2 a retourné 1
    $$$$$:   50-block 33
appel   3 jamais exécuté
    $$$$$:   50-block 35
appel   4 jamais exécuté
    $$$$$:   50-block 37
appel   5 jamais exécuté
        -:   51:
function _ZN6RenderC2EiiRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE called 1 returned 100% blocks executed 50%
        1:   52:Render::Render(int width, int height, const std::string& filename) : width(width), height(height) {
        1:   52-block 2
appel   0 a retourné 1
appel   1 a retourné 1
branchement  2 pris 1 (fallthrough)
branchement  3 pris 0 (throw)
        1:   52-block 4
appel   4 a retourné 1
branchement  5 pris 1 (fallthrough)
branchement  6 pris 0 (throw)
        1:   52-block 5
appel   7 a retourné 1
        1:   53:    filepath = SCREENSHORT_DIR + filename + ".ppm";
appel   0 a retourné 1
branchement  1 pris 1 (fallthrough)
branchement  2 pris 0 (throw)
        1:   53-block 7
appel   3 a retourné 1
branchement  4 pris 1 (fallthrough)
branchement  5 pris 0 (throw)
        1:   53-block 8
appel   6 a retourné 1
appel   7 a retourné 1
appel   8 a retourné 1
    $$$$$:   53-block 12
appel   9 jamais exécuté
    $$$$$:   53-block 14
    $$$$$:   53-block 15
        1:   54:}
    $$$$$:   54-block 16
appel   0 jamais exécuté
    $$$$$:   54-block 18
appel   1 jamais exécuté
    $$$$$:   54-block 20
appel   2 jamais exécuté
    $$$$$:   54-block 22
appel   3 jamais exécuté
        -:   55:
function _Z9linearingf called 6220800 returned 100% blocks executed 75%
  6220800:   56:float linearing(float x)
        -:   57:{
  6220800:   58:    if (x > 0)
  6220800:   58-block 2
branchement  0 pris 6220800 (fallthrough)
branchement  1 pris 0
  6220800:   59:        return std::sqrt(x);
  6220800:   59-block 3
appel   0 a retourné 6220800
    #####:   60:    return 0;
    %%%%%:   60-block 4
        -:   61:}
        -:   62:
function _ZN6Render10draw_pixelERSoRK5Color called 2073600 returned 100% blocks executed 71%
  2073600:   63:void Render::draw_pixel(std::ostream& out, const Color& c) {
        -:   64:
function _ZZN6Render10draw_pixelERSoRK5ColorENKUlfE_clEf called 6220800 returned 100% blocks executed 83%
  6220800:   65:    auto clamp = [](float x) {
 6220800*:   66:        if (x < 0.0f) return 0.0f;
  6220800:   66-block 2
branchement  0 pris 0 (fallthrough)
branchement  1 pris 6220800
    %%%%%:   66-block 3
  6220800:   67:        if (x > 1.0f) return 1.0f;
  6220800:   67-block 4
branchement  0 pris 9040 (fallthrough)
branchement  1 pris 6211760
     9040:   67-block 5
  6211760:   68:        return x;
  6211760:   68-block 6
        -:   69:    };
        -:   70:
  2073600:   71:    const auto r = linearing(c.r);
  2073600:   71-block 2
appel   0 a retourné 2073600
branchement  1 pris 2073600 (fallthrough)
branchement  2 pris 0 (throw)
  2073600:   72:    const auto g = linearing(c.g);
  2073600:   72-block 3
appel   0 a retourné 2073600
branchement  1 pris 2073600 (fallthrough)
branchement  2 pris 0 (throw)
  2073600:   73:    const auto b = linearing(c.b);
  2073600:   73-block 4
appel   0 a retourné 2073600
branchement  1 pris 2073600 (fallthrough)
branchement  2 pris 0 (throw)
        -:   74:
  2073600:   75:    const int r_byte = static_cast<int>(255.0f * clamp(r)); // +0.5f pour arrondir correctement
  2073600:   75-block 5
appel   0 a retourné 2073600
  2073600:   76:    const int g_byte = static_cast<int>(255.0f * clamp(g));
appel   0 a retourné 2073600
  2073600:   77:    const int b_byte = static_cast<int>(255.0f * clamp(b));
appel   0 a retourné 2073600
        -:   78:
  2073600:   79:    if (r_byte > 255 || g_byte > 255 || b_byte > 255)
branchement  0 pris 2073600 (fallthrough)
branchement  1 pris 0
  2073600:   79-block 9
branchement  2 pris 2073600 (fallthrough)
branchement  3 pris 0
  2073600:   79-block 10
branchement  4 pris 0 (fallthrough)
branchement  5 pris 2073600
    #####:   80:        std::cerr << "Warning: RGB out of bounds: " << r_byte << " " << g_byte << " " << b_byte << "\n";
    %%%%%:   80-block 11
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    %%%%%:   80-block 12
appel   3 jamais exécuté
branchement  4 jamais exécuté (fallthrough)
branchement  5 jamais exécuté (throw)
    %%%%%:   80-block 13
appel   6 jamais exécuté
branchement  7 jamais exécuté (fallthrough)
branchement  8 jamais exécuté (throw)
    %%%%%:   80-block 14
appel   9 jamais exécuté
branchement 10 jamais exécuté (fallthrough)
branchement 11 jamais exécuté (throw)
    %%%%%:   80-block 15
appel  12 jamais exécuté
branchement 13 jamais exécuté (fallthrough)
branchement 14 jamais exécuté (throw)
    %%%%%:   80-block 16
appel  15 jamais exécuté
branchement 16 jamais exécuté (fallthrough)
branchement 17 jamais exécuté (throw)
    %%%%%:   80-block 17
appel  18 jamais exécuté
branchement 19 jamais exécuté (fallthrough)
branchement 20 jamais exécuté (throw)
        -:   81:
  2073600:   82:    out << r_byte << " " << g_byte << " " << b_byte << "\n";
  2073600:   82-block 18
appel   0 a retourné 2073600
branchement  1 pris 2073600 (fallthrough)
branchement  2 pris 0 (throw)
  2073600:   82-block 19
appel   3 a retourné 2073600
branchement  4 pris 2073600 (fallthrough)
branchement  5 pris 0 (throw)
  2073600:   82-block 20
appel   6 a retourné 2073600
branchement  7 pris 2073600 (fallthrough)
branchement  8 pris 0 (throw)
  2073600:   82-block 21
appel   9 a retourné 2073600
branchement 10 pris 2073600 (fallthrough)
branchement 11 pris 0 (throw)
  2073600:   82-block 22
appel  12 a retourné 2073600
branchement 13 pris 2073600 (fallthrough)
branchement 14 pris 0 (throw)
  2073600:   82-block 23
appel  15 a retourné 2073600
branchement 16 pris 2073600 (fallthrough)
branchement 17 pris 0 (throw)
  2073600:   83:}
  2073600:   83-block 24
        -:   84:
function _ZNK6Render7displayEv called 1 returned 0% blocks executed 16%
        1:   85:void Render::display() const
        -:   86:{
        1:   87:    std::cout << filepath <<std::endl;
        1:   87-block 2
appel   0 a retourné 1
branchement  1 pris 1 (fallthrough)
branchement  2 pris 0 (throw)
        1:   87-block 3
appel   3 a retourné 1
branchement  4 pris 1 (fallthrough)
branchement  5 pris 0 (throw)
        1:   88:    std::vector<sf::Uint8> pixels;
        1:   89:    unsigned width = 0, height = 0;
        -:   90:
        1:   91:    if (!loadPPM_P3(filepath, pixels, width, height))
        1:   91-block 4
appel   0 a retourné 1
branchement  1 pris 1 (fallthrough)
branchement  2 pris 0 (throw)
        1:   91-block 5
branchement  3 pris 0 (fallthrough)
branchement  4 pris 1
    #####:   92:        return;
    %%%%%:   92-block 6
        -:   93:
       1*:   94:    sf::RenderWindow window(sf::VideoMode(width/2, height/2), "Affichage PPM P3", sf::Style::Default);
        1:   94-block 7
appel   0 a retourné 1
appel   1 a retourné 1
appel   2 a retourné 1
branchement  3 pris 1 (fallthrough)
branchement  4 pris 0 (throw)
        1:   94-block 10
appel   5 a retourné 1
branchement  6 pris 1 (fallthrough)
branchement  7 pris 0 (throw)
        1:   94-block 11
appel   8 a retourné 0
branchement  9 pris 0 (fallthrough)
branchement 10 pris 0 (throw)
    %%%%%:   94-block 12
appel  11 jamais exécuté
appel  12 jamais exécuté
    $$$$$:   94-block 46
    $$$$$:   94-block 47
appel  13 jamais exécuté
    $$$$$:   94-block 49
appel  14 jamais exécuté
    $$$$$:   94-block 51
    $$$$$:   94-block 52
    $$$$$:   94-block 53
    #####:   95:    window.setFramerateLimit(60);
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
        -:   96:
    #####:   97:    sf::Texture texture;
    %%%%%:   97-block 15
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    #####:   98:    texture.create(width, height);
    %%%%%:   98-block 16
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    #####:   99:    texture.update(pixels.data());
    %%%%%:   99-block 17
appel   0 jamais exécuté
appel   1 jamais exécuté
branchement  2 jamais exécuté (fallthrough)
branchement  3 jamais exécuté (throw)
        -:  100:
    #####:  101:    sf::Sprite sprite(texture);
    %%%%%:  101-block 19
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
        -:  102:
    #####:  103:    while (window.isOpen()) {
    %%%%%:  103-block 20
    %%%%%:  103-block 34
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    %%%%%:  103-block 35
branchement  3 jamais exécuté
branchement  4 jamais exécuté (fallthrough)
    #####:  104:        sf::Event event{};
    #####:  105:        while (window.pollEvent(event)) {
    %%%%%:  105-block 21
    %%%%%:  105-block 27
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    %%%%%:  105-block 28
branchement  3 jamais exécuté
branchement  4 jamais exécuté (fallthrough)
    #####:  106:            if (event.type == sf::Event::Closed || (event.type == sf::Event::KeyPressed && event.key.code == sf::Keyboard::Escape)){
    %%%%%:  106-block 22
branchement  0 jamais exécuté (fallthrough)
branchement  1 jamais exécuté
    %%%%%:  106-block 23
branchement  2 jamais exécuté (fallthrough)
branchement  3 jamais exécuté
    %%%%%:  106-block 24
branchement  4 jamais exécuté (fallthrough)
branchement  5 jamais exécuté
    #####:  107:                window.close();
    %%%%%:  107-block 25
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
        -:  108:            }
        -:  109:        }
    #####:  110:        window.clear();
    %%%%%:  110-block 29
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    %%%%%:  110-block 30
appel   3 jamais exécuté
branchement  4 jamais exécuté (fallthrough)
branchement  5 jamais exécuté (throw)
    $$$$$:  110-block 54
    #####:  111:        window.draw(sprite);
    %%%%%:  111-block 31
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
    #####:  112:        window.display();
    %%%%%:  112-block 32
appel   0 jamais exécuté
branchement  1 jamais exécuté (fallthrough)
branchement  2 jamais exécuté (throw)
        -:  113:    }
    #####:  114:}
    %%%%%:  114-block 36
appel   0 jamais exécuté
appel   1 jamais exécuté
appel   2 jamais exécuté
    %%%%%:  114-block 40
appel   3 jamais exécuté
branchement  4 jamais exécuté (fallthrough)
branchement  5 jamais exécuté
    $$$$$:  114-block 56
appel   6 jamais exécuté
    $$$$$:  114-block 58
appel   7 jamais exécuté
    $$$$$:  114-block 60
appel   8 jamais exécuté
    $$$$$:  114-block 62
appel   9 jamais exécuté
